{
  "$schema": "../../schemas/story.schema.json",
  "stageId": "stage_1_apartment",
  "startingBeat": "wake_up",
  "beats": [
    {
      "id": "wake_up",
      "description": "Carl wakes up in his apartment",
      "dialogueId": "stage1_wake_up",
      "trigger": {
        "type": "scene_enter",
        "params": { "sceneId": "bedroom" }
      },
      "consequences": {
        "nextBeat": "find_note"
      }
    },
    {
      "id": "find_note",
      "description": "Carl finds Paul's suspicious note",
      "dialogueId": "stage1_find_note",
      "trigger": {
        "type": "item_pickup",
        "params": { "itemId": "bloody_note" }
      },
      "consequences": {
        "horrorLevelChange": 1,
        "nextBeat": "check_kitchen"
      }
    },
    {
      "id": "check_kitchen",
      "description": "Carl enters the kitchen and sees the mess",
      "dialogueId": "stage1_kitchen",
      "trigger": {
        "type": "scene_enter",
        "params": { "sceneId": "kitchen" }
      },
      "consequences": {
        "horrorLevelChange": 2,
        "unlockExits": ["basement_door"],
        "nextBeat": "find_key"
      }
    },
    {
      "id": "find_key",
      "description": "Carl finds the basement key",
      "dialogueId": "stage1_basement_key",
      "trigger": {
        "type": "item_pickup",
        "params": { "itemId": "basement_key" }
      },
      "consequences": {
        "nextBeat": "enter_basement"
      }
    },
    {
      "id": "enter_basement",
      "description": "Carl descends into the basement",
      "dialogueId": "stage1_basement",
      "trigger": {
        "type": "scene_enter",
        "params": { "sceneId": "basement" }
      },
      "consequences": {
        "horrorLevelChange": 2,
        "spawnItems": ["paul_basement"],
        "nextBeat": "confront_paul"
      }
    },
    {
      "id": "confront_paul",
      "description": "Carl confronts Paul about the mess",
      "dialogueId": "stage1_confront",
      "trigger": {
        "type": "npc_interact",
        "params": { "npcId": "paul_basement" }
      },
      "consequences": {
        "horrorLevelChange": 1
      }
    }
  ],
  "dialogues": {
    "stage1_wake_up": {
      "carl": [
        "Ugh... what time is it?",
        "Why does everything smell like copper?"
      ],
      "paul": [
        "Good morning, Carl!",
        "I made you breakfast!"
      ]
    },
    "stage1_find_note": {
      "carl": [
        "A note... covered in something red.",
        "'Dear Carl, I made you breakfast. Love, Paul.'",
        "Why is there a smiley face drawn in... no. No no no."
      ],
      "paul": [
        "My breakfast invitation!",
        "I worked really hard on the presentation."
      ]
    },
    "stage1_kitchen": {
      "carl": [
        "PAUL! Why is there blood on the ceiling?!",
        "And the walls. And the... is that a handprint?"
      ],
      "paul": [
        "Oh, the kitchen! I was doing some... redecorating.",
        "Do you like the new color scheme?"
      ]
    },
    "stage1_basement_key": {
      "carl": [
        "A key... tagged 'BASEMENT'.",
        "Do I even want to know what's down there?",
        "...Yes. Unfortunately, I need to know."
      ],
      "paul": [
        "Oh! My art supply room key!",
        "I've been working on a very special project."
      ]
    },
    "stage1_basement": {
      "carl": [
        "It's so dark down here...",
        "What's that smell?"
      ],
      "paul": [
        "Welcome to my workshop!",
        "Mind the... art supplies."
      ]
    },
    "stage1_confront": {
      "carl": [
        "Paul. What did you do?",
        "And don't say 'nothing' because I can SEE the blood."
      ],
      "paul": [
        "Caaaarl, I told you.",
        "I made you breakfast.",
        "From that nice person who came to the door."
      ]
    }
  }
}
